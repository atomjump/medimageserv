<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.png">
    

    <title>MedImage Server</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="../vendor/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>

	<!-- For the dropdown autocomplete -->
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>		
    

</head>

<body>

	<script>
		function newDir(str) {

			//str = origStr.replace(/\s+/g, '');		//remove spaces?  TODO check this
			//str = str.replace(/[^a-z0-9]/gi, '');	//only allow certain chars TODO check this

			window.location = '/addon/show-analysis/?photo=' + encodeURIComponent(str);

			return false;

		}
	
	
	
		 jQuery(document).ready(function(){
		 
			 jQuery("#dir").autocomplete({
				source: function(request, resp) {
					
					var finalTerm = request.term;
					if(jQuery("#folder-first-word").is(":checked")) {
						finalTerm = "#" + finalTerm;  //add a hash, uri encoded 
			
					}
					var uri = "/addon/get-photos/";
					
					
					 jQuery.ajax({
					 	url: uri,
					 	data: { term: finalTerm },
					 	success: function(data) {
					
					 		
							var myobj = JSON.parse(data);
							resp(myobj);
					 	}
					 }); 
				},
				minLength: 1,//search after one characters
				select: function(event,ui){
					//do something
					
					
					//Action the photo now
					newDir(ui.item.value);
					
				}
			});
		});

	
	</script>


    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
            	<img src="../images/medimage-logo-blank.svg" width="50" height="50" style="float: left;">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html">MedImage Server</a>
            </div>
            <!-- /.navbar-header -->

               <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        
                        <li>
                            <a href="http://medimage.co.nz/guide.php#privacy"><i class="fa fa-eye fa-fw"></i> Privacy and Security Information</a>
                        </li>
                        <li>
                            <a href="http://medimage.co.nz/guide.php#purchase"><i class="fa fa-credit-card fa-fw"></i> Purchase Unlimited Transfers</a>
                        </li>   
						<li>
                            <a href="http://medimage.co.nz"><i class="fa fa-globe fa-fw"></i> MedImage Website</a>
                        </li> 
                        <li>
                            <a href="http://medimage.co.nz/guide.php"><i class="fa fa-file-text fa-fw"></i> Documentation</a>
                        </li> 
                        <li>
                            <a href="http://medimage.co.nz/technical-guide/"><i class="fa fa-git fa-fw"></i> Technical Documentation</a>
                        </li>
                        <li>
                            <a href="http://medimage.co.nz/faq/"><i class="fa fa-question-circle fa-fw"></i> FAQ</a>
                        </li>
                        <li>
                            <a href="http://medimagestatus.atomjump.com/?autostart=true"><i class="fa fa-check-square-o fa-fw"></i> AJ Service Status</a>
                        </li>
                          
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
					&nbsp;
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                     <!-- /.panel -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-random fa-fw"></i> Photo
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                      
							<h1>Photo Search</h1>

							<p>Enter a patient ID or photo name for analysis</p>
							<form id="search-dir" action="/addon/show-analysis">
								<input id="dir" type="text" name="photo" value="" placeholder="Enter a photo or patient ID" autocomplete="off">
								
								The first word is a folder
								<input type="checkbox" id="folder-first-word" name="folder-first-word" checked="checked">
								
								<input type="submit" value="Search">
							</form>
							
							
							

							
							<p><a class="standardlink" href="../index.html">Return</a></p>
					  
                    
                    	 </div>
                    
                    
                    
                   </div>
                
            </div>
 
 		</div>
 		<!-- /page-wrapper -->
            
            
 

    </div>
    <!-- /#wrapper -->

 
    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="../vendor/raphael/raphael.min.js"></script>
    <script src="../vendor/morrisjs/morris.min.js"></script>
    <script src="../data/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

</body>

</html>
